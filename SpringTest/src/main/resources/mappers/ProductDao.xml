<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.icia.springtest.dao.ProductDao">
    <insert id="insertProduct" keyProperty="t_num" useGeneratedKeys="true">
        insert into test values(null,#{t_user},#{t_merchant},default)
    </insert>
    <insert id="FileInsert">
        insert into productfile values(#{pf_num},#{pf_systemname})
    </insert>
    <insert id="insertReply">
        insert into replys values(#{r_num},#{r_tnum},#{r_contents},#{r_writer})
    </insert>
    <update id="updateProduct">
        update test set t_merchant=#{t_merchant}  where t_num=#{t_num};
    </update>
    <update id="FileUpdate">
        update productfile set pf_systemname=#{pf_systemname} where pf_num=#{pf_num}
    </update>


    <select id="getProductList" resultType="com.icia.springtest.dto.ProductDto">
        select * from test limit #{start},#{end}
    </select>
    <select id="fileDownload" resultType="org.springframework.core.io.Resource">
        select * from productfile where pf_num=#{t_num}
    </select>
    <select id="getFile" resultType="com.icia.springtest.dto.FileDto">
        select * from productfile where pf_num=#{tNum}
    </select>
    <select id="getReply" resultType="com.icia.springtest.dto.ReplyDto">
        select * from replys where r_tnum=#{tNum}
    </select>
    <select id="getupdateinfo" resultType="com.icia.springtest.dto.ProductDto">
        select * from test where t_num=#{tNum}
    </select>
    <select id="getupdateFile" resultType="com.icia.springtest.dto.FileDto">
        select * from productfile where pf_num=#{tNum}
    </select>

</mapper>